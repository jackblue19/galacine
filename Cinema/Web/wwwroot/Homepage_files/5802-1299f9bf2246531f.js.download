"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5802],{80195:function(e,t){t.Z={src:"/_next/static/media/img-blank.bb695736.svg",height:120,width:80,blurWidth:0,blurHeight:0}},69551:function(e,t,s){s.d(t,{Z:function(){return c}});var n=s(36734),l=s(20150),i=s.n(l);s(51776);var a=s(86880),o=s(75141),r=s(33906),d=s(88910);function c(e){let{t}=(0,a.Z)(),{title:s,description:l,ogTitle:c,ogImage:m,ogDescription:x,schema:u,metaRobots:h,ogUrl:p,ogType:v}=e;t("seo:titleSuffix");let g=t("seo:defaultTitle"),f=d.EZ.SITE_URL,j=(0,r.useRouter)(),b=f+j.asPath;return(0,n.jsxs)(i(),{children:[s?(0,n.jsx)("title",{children:s||g}):(0,n.jsx)("title",{children:g}),l&&(0,n.jsx)("meta",{name:"description",content:(0,o.Vt)(l)}),c&&(0,n.jsx)("meta",{property:"og:title",content:c}),m&&(0,n.jsx)("meta",{property:"og:image",content:m}),p&&(0,n.jsx)("meta",{property:"og:url",content:p}),x&&(0,n.jsx)("meta",{property:"og:description",content:(0,o.Vt)(x)}),v&&(0,n.jsx)("meta",{property:"og:type",content:v}),h&&(0,n.jsx)("meta",{name:"robots",content:h}),(0,n.jsx)("link",{rel:"canonical",href:b}),u&&(0,n.jsx)("script",{type:"application/ld+json",children:JSON.stringify(u)})]})}},2938:function(e,t,s){s.d(t,{Z:function(){return $}});var n=s(36734),l=s(25552),i=s(44234),a=s(12792),o=s(4164),r=s(86880),d=s(3713),c=s.n(d),m=s(25404),x=s(51776),u=s(94195),h=s.n(u),p=s(92560),v=s(11741),g=s(37654),f=s.n(g),j=s(88910),b=s(44155),y=s.n(b),N=s(31720),k=s(42072),A=s(13891),S=s.n(A),w=s(92500),I=s(75141);function C(){let{t:e}=(0,r.Z)(),{quote:t,saveQuote:s,validQuote:l}=(0,a.bN)(),[i,o]=(0,x.useState)(0),[d,c]=(0,x.useState)(Date.now());(0,x.useEffect)(()=>{var e;c(null==t?void 0:null===(e=t.expiredAt)||void 0===e?void 0:e.getTime()),o(i+1)},[t.expiredAt]);let m=(e,s)=>{s||k.O2.emit("cancelOrder",t.userSessionId)},u=t=>{let{minutes:s,seconds:l,completed:i}=t;return i?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex justify-center items-center mb-4",children:[(0,n.jsxs)("span",{className:"text-sm",children:[e("booking:holdingTime"),":"]}),(0,n.jsxs)("span",{className:"text-primary text-base font-bold ml-1",children:[(0,I.Bu)(s,2),":",(0,I.Bu)(l,2)]})]})})};return(0,n.jsx)(n.Fragment,{children:l()&&d&&(0,n.jsx)(w.ZP,{date:d,renderer:u,onComplete:(e,t)=>m(e,t)},i)})}var G=s(80195),D=s(33906),Z=s(11804),O=s.n(Z),V=s(82327),P=s.n(V),M=s(56683),E=s(6425),R=s.n(E),F={src:"/_next/static/media/delete.addc939e.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAQAAABuBnYAAAAAHUlEQVR42mPABCxoEBOsYNjEsAECgawVGAJkGAoA8bILKeQMtxMAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8},T=s(67832),q=s.n(T),L=s(48196),U=s(34904),B=s.n(U),Y=s(21818),_={src:"/_next/static/media/icon-success.c42e4e43.png",height:683,width:627,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAICAYAAAA1BOUGAAAA3UlEQVR42mNYcm7V4qknZ/zff/toLAM6mHZqxv+JFxr+9+9b9JLPdOk+Xu/ZFxjc57XG+U3gYthyZWfzlMPz/mS0Lv/f7t/6f2Jsy385j9n/Gex7JzKAQKJL45oF4fX/J8R1/e6J6fm5IL72f314TT1Ijj2zrKvTxb/5m4FO/n8Tk+L/+halPxkYXGUZQGDn3hMtpfVT/04OZvg/PZThX2Fl3/9XH341wB0mn7LuhmvSov8OcQv+uxZuevX9y6ckhrkrjjODJJtnHJ7SMevI/46Zh/839m6dy8DAwAAAAl5mpouKItwAAAAASUVORK5CYII=",blurWidth:7,blurHeight:8},J={src:"/_next/static/media/Line.c026ce35.png",height:2,width:280,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAABCAQAAABJCSfIAAAAFklEQVR42mPYN3nflH1T9k6G0PsmAwBaVwqMBj4p7wAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:1},H=s(78446);let z=(0,n.jsx)("span",{className:"w-[25px] h-[25px] rounded-full outline-none absolute","data-dismiss":"modal","aria-label":"Close",children:(0,n.jsx)(q(),{src:{src:"/_next/static/media/IconClose.41d08d13.png",height:25,width:25,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAYAAADED76LAAAA20lEQVR42h2OTYrCUBCEe5gTDAzD3GNgbiWoyYvvRZMnagSzEnUfj6DLHMCFCmLQVRbZmCME/EPbaht6VfVVFSnXJfyf0Xplw/AeBsHZU2rR9v0fklNK/fd7vSoaDNh1nCfMHI9GDOPRN+abtNbrYRRxWZa36WTCaZpynufXZqPBXWtnJLFCilhVFZenE4N8oIKDTmdHiLpIrJAiFkXBSZI8Wp4nNRvCoGUcx+9YIecQsyy7eYCstT4ZY37hPDjolFghATGqF7V6/VMM8l8YNEbnHuYtRE1EH0REL9zak84bZcpxAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:8},width:45,height:20,alt:"Icon Close",className:"w-[25px] h-[25px]"})}),Q={inputProps:{"aria-label":"Checkbox"}};function W(e){var t,s;let{isOpen:l,onClose:o,tickets:d,concessions:m,placeOrder:u}=e,{t:p,lang:v}=(0,r.Z)(),{quote:g}=(0,a.bN)(),{movieData:f,cinemaData:j,sessionData:b}=g,y=c()(null===(t=g.sessionData)||void 0===t?void 0:t.showDate).locale(v),[N,k]=x.useState(!1),[A,S]=x.useState("");B()(g.seats,e=>e.ticketPrice),B()(m,e=>e.price*e.qty),g.discountAmount,g.loyaltyDiscount;let w=()=>{k(!N),S("")},I=()=>{if(!N){S(p("booking:msgConfirmOrder"));return}u(),o()};return(0,n.jsx)(Y.Z,{open:l,onClose:o,showCloseIcon:!0,closeIcon:z,closeOnOverlayClick:!0,focusTrapped:!1,closeIconId:"custom__btn__icon-close-confirm",center:!0,classNames:{modal:"modal-sx m-0 bg-transparent shadow-none modal-confirm-order"},children:(0,n.jsxs)("div",{className:"py-5 px-6 modal-radius-10 bg-white",children:[(0,n.jsx)("h1",{className:"uppercase text-[16px] font-bold text-center mb-5",children:p("booking:inforBooking")}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex gap-x-4 items-start",children:[(0,n.jsx)("p",{className:"text-[14px] font-bold flex-none w-[30px] py-4",children:p("common:movie")}),(0,n.jsxs)("div",{className:"border border-[#DCD8D8] flex-1 text-left p-4",children:[(0,n.jsx)("p",{className:"text-[16px] font-bold text-[#1353B4]",children:null==f?void 0:f.name}),(0,n.jsxs)("p",{className:"text-[14px] ",children:[(0,n.jsx)("span",{children:null==f?void 0:f.movieFormat}),"  ",(0,n.jsx)("span",{className:"ml-2",children:(0,n.jsx)(i.Z,{age:null==f?void 0:f.age})})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-x-4 my-3 items-start",children:[(0,n.jsx)("p",{className:"text-[14px] font-bold flex-none w-[30px] py-4",children:p("common:cinema")}),(0,n.jsxs)("div",{className:"border border-[#DCD8D8] flex-1 text-left p-4",children:[(0,n.jsx)("p",{className:"text-[16px] font-bold text-[#1353B4]",children:null==j?void 0:j.name}),(0,n.jsxs)("p",{className:"text-[14px] font-bold capitalize",children:[null==b?void 0:b.showTime," - ",y.format("dddd, "),(0,n.jsx)("strong",{children:y.format("DD/MM/YYYY")})]})]})]}),(0,n.jsxs)("div",{className:"flex gap-x-4 my-3 items-center",children:[(0,n.jsx)("div",{className:"text-[14px] font-bold flex-none w-[30px]"}),(0,n.jsxs)("div",{className:"border border-[#DCD8D8] flex-1 text-left p-4",children:[(0,n.jsx)("p",{className:"text-[14px]",children:null==b?void 0:b.screenName}),h()(d,e=>(0,n.jsx)("div",{className:"flex justify-between text-[14px]",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{children:[e.name," "]}),(0,n.jsx)("strong",{children:e.seats.join(", ")})]})},e.categoryCode)),m.length>0&&(0,n.jsx)("div",{children:h()(m,e=>(0,n.jsx)("div",{className:"flex justify-between text-sm",children:(0,n.jsxs)("span",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name})]})},e.name))})]})]}),(0,n.jsxs)("div",{className:"flex gap-x-4 my-5 items-center",children:[(0,n.jsx)("p",{className:"text-[14px] font-bold flex-none w-[30px]",children:p("booking:totalPayment")}),(0,n.jsx)("div",{className:"flex-1 text-left px-4 py-2 bg-[#1353B4] text-white font-bold",children:(0,n.jsxs)("p",{children:[null==g?void 0:null===(s=g.total)||void 0===s?void 0:s.toLocaleString("vi-VN")," VNÄ"]})})]}),(0,n.jsx)("div",{className:"relative modal-ticket",children:(0,n.jsx)(q(),{src:J,width:45,height:1,alt:"Icon line",className:"w-full h-full"})}),(0,n.jsxs)("div",{className:"flex items-center mt-5",children:[(0,n.jsx)(q(),{src:_,width:45,height:20,alt:"Icon show",className:"w-[36px] h-[40px] flex-none"}),(0,n.jsxs)("p",{className:"min-[412px]:text-[14px] text-[12px] flex-auto ml-1",children:[(0,n.jsxs)("i",{children:[p("booking:accessConfirm")," "]}),(0,n.jsx)("i",{className:"text-sm text-gray-600",dangerouslySetInnerHTML:{__html:p("booking:accessConfirmText")}})]}),(0,n.jsx)("div",{className:"flex-none w-[20px]",children:(0,n.jsx)(H.Z,{...Q,checked:N,onChange:w,size:"small",sx:{color:"#f26b38","&.Mui-checked":{color:"#f26b38"},"&:hover":{backgroundColor:"rgba(242, 107, 56, 0.04)"}}})})]}),A&&(0,n.jsx)("p",{className:"text-[12px] text-red text-center my-2",children:A}),(0,n.jsx)("div",{className:"text-center mt-2",children:(0,n.jsx)("button",{className:"w-1/2 py-2 border rounded-md mx-auto  text-white ".concat(N?"bg-primary hover:bg-orange-20 font-bold":"bg-gray-400 cursor-not-allowed font-medium"),onClick:I,disabled:!N,children:p("booking:placeOrder")})})]})]})})}function K(e){let{isOpen:t,onClose:s,item:l,handleOk:i}=e,{t:a}=(0,r.Z)(j.C7.COMMON);return(0,n.jsxs)(Y.Z,{open:t,onClose:s,showCloseIcon:!1,center:!0,closeOnOverlayClick:!1,classNames:{modal:"modal-375 modal-315 p-0"},children:[(0,n.jsxs)("div",{className:"generic__modal-wrapper",children:[(0,n.jsxs)("div",{className:"p-3",children:[(0,n.jsx)("h3",{className:"text-center font-bold text-lg uppercase",children:l.title}),(0,n.jsx)("p",{className:"text-center font-bold text-base px-4",children:l.content})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)(q(),{src:l.image,width:100,height:100,alt:l.title,className:"w-full h-full object-fill"}),(0,n.jsxs)("div",{className:"py-[10px] px-4",children:[(0,n.jsx)("p",{className:"text-base font-semibold",children:null==l?void 0:l.name}),(0,n.jsx)("p",{className:"text-base text-gray-600",children:null==l?void 0:l.description}),(0,n.jsxs)("p",{className:"text-base",children:[(0,n.jsxs)("span",{children:[a("price"),": "]}),(0,n.jsx)("span",{className:"text-primary font-bold italic",children:M.lV.formatCurrencyVND(l.price)})]}),l.note?(0,n.jsxs)("p",{className:"text-sm text-gray-400 italic",children:[a("note"),": ",l.note]}):null]})]})]}),(0,n.jsxs)("div",{className:"flex",children:[(0,n.jsx)("button",{onClick:s,className:"flex-1 hover:bg-grey-80/20 transition-all duration-30 min-w-[135px] w-full focus:outline-none focus:ring-[#e38601]text-center inline-flex items-center dark:hover:bg-grey-80/20 dark:focus:ring-[#e38601] justify-center text-black bg-grey-80/20 h-10 px-5 py-2.5 text-sm capitalize",children:a("skip")}),(0,n.jsx)("button",{onClick:i,className:"flex-1 hover:bg-[#e38601] transition-all duration-30 min-w-[135px] w-full focus:outline-none focus:ring-[#e38601]text-center inline-flex items-center dark:hover:bg-[#e38601] dark:focus:ring-[#e38601] justify-center text-white bg-primary h-10 px-5 py-2.5 text-sm capitalize",children:a("buyNow")})]})]})}let X=new N.n;function $(){var e,t,s,d,u,g,b,N,A,w,I;let{quote:Z,saveQuote:V,validQuote:E,member:T,validMember:U}=(0,a.bN)(),{activeStep:Y,isLoading:_,disableNextStep:J,setIsLoading:H,voucherGroups:z,isValidSeats:Q}=(0,o.Q)(),$=(0,D.useRouter)(),{t:ee,lang:et}=(0,r.Z)(),es=c()(null===(e=Z.sessionData)||void 0===e?void 0:e.showDate).locale(et),[en,el]=(0,x.useState)([]),[ei,ea]=(0,x.useState)([]),[eo,er]=(0,x.useState)([]),ed=x.useRef(null),[ec,em]=(0,x.useState)("max"),[ex,eu]=x.useState(!1),[eh,ep]=(0,x.useState)(!1),[ev,eg]=(0,x.useState)(null);(0,x.useEffect)(()=>{if(Y<4){let e=f()(null==Z?void 0:Z.seats,e=>e.type),t=h()(e,(e,t)=>{let s=0,n=[];return y()(e,e=>{s+=e.ticketPrice,0===e.seatsInGroup.length?n.push([e.rowName,e.id].join("")):y()(e.seatsInGroup,t=>{n.push([e.rowName,t.id].join(""))})}),{categoryCode:t,name:M.lV.getSeatTypeVietnameseName(+t),qty:e.length,seats:n,price:s/e.length,total:s}});el(t)}else el(Z.tickets)},[Z.seats,Y,Z.tickets]);let ef=()=>{if(Y>2){if(4===Y){eb();return}let e=P()(Z.concessions,e=>e.itemId>0);if(3===Y&&e.length>0){ey();return}V({activeStep:Y-1});return}if(2===Y){if(E()){k.O2.emit("cancelOrder",Z.userSessionId);return}V({activeStep:Y-1}).then(()=>{$.push("/booking")})}1===Y&&$.push("/")},ej=()=>{if(!U()){k.GG.emit("openSignInModal");return}switch(Y){case 1:ew();break;case 2:eI();break;case 3:eG();break;case 4:eu(!0)}},eb=()=>{k.GG.emit("openConfirmModal",{header:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center py-2",children:[(0,n.jsx)(p.G,{icon:v.ik8,className:"text-[40px] text-yellow-400"}),(0,n.jsx)("h4",{className:"mt-4 font-semibold text-center text-xl",children:ee("common:warning")})]})}),content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"mt-4 text-center",children:ee("booking:confirmClearVoucher")})}),onConfirm:()=>{if(!Z||!Z.packageSelect)return k.O2.emit("clearPoint"),k.O2.emit("clearVouchers"),V({activeStep:Y-1});{var e;let t={orderId:Z.userSessionId,sessionId:null===(e=Z.sessionData)||void 0===e?void 0:e.id,concessions:[{itemId:Z.packageSelect.concessionCode,quantity:1}]};X.removeConcession(t).then(e=>{if(e.ok){var t;let e={orderId:Z.userSessionId,sessionId:null===(t=Z.sessionData)||void 0===t?void 0:t.id,concessions:[]};X.seatConcessions(e).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>(k.O2.emit("clearPoint"),k.O2.emit("clearVouchers"),V({activeStep:Y-1})))}})}}})},ey=()=>{k.GG.emit("openConfirmModal",{header:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center py-2",children:[(0,n.jsx)(p.G,{icon:v.ik8,className:"text-[40px] text-yellow-400"}),(0,n.jsx)("h4",{className:"mt-4 font-semibold text-center text-xl",children:ee("common:warning")})]})}),content:(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("p",{className:"mt-4 text-center",children:ee("booking:confirmRemoveConcession")})}),onConfirm:()=>{eS()}})},eN=()=>{var e;let t=null===(e=Z.cinemaData)||void 0===e?void 0:e.id;return H(!0),X.createOrder(t).finally(()=>H(!1)).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{let t=c()().add(e.data.expiredTime,"seconds").toDate();return V({userSessionId:e.data.orderId,expiredAt:t})}).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},ek=(e,t)=>{var s;let n=[];y()(Z.seats,e=>{0===e.seatsInGroup.length?n.push(S()(e,["area","row","column"])):y()(e.seatsInGroup,e=>n.push(S()(e,["area","row","column"])))});let l=t?[{ticketTypeCode:null==ev?void 0:ev.ticketTypeCode,price:null==ev?void 0:ev.price,quantity:null==ev?void 0:ev.quantity,type:null==ev?void 0:ev.type}]:[],i={orderId:e,sessionId:null===(s=Z.sessionData)||void 0===s?void 0:s.id,seats:n,packages:l};return H(!0),X.seatSeats(i).finally(()=>H(!1)).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>{if(!i.packages||!(i.packages.length>0)||(null==ev?void 0:ev.skipConcession)!==j.zI||(null==ev?void 0:ev.type)!==j.XG.CUSTOM)return V({activeStep:Y+1});eA(e)}).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eA=e=>{var t,s;H(!0);let n={orderId:e,sessionId:null===(t=Z.sessionData)||void 0===t?void 0:t.id,concessions:[{itemId:null!==(s=null==ev?void 0:ev.concessionCode)&&void 0!==s?s:0,quantity:1}]};X.seatConcessions(n).finally(()=>H(!1)).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>V({activeStep:Y+2})).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eS=()=>{var e;let t=P()(Z.concessions,e=>e.itemId>0),s=h()(t,e=>({itemId:e.itemId,quantity:e.qty})),n={orderId:Z.userSessionId,sessionId:null===(e=Z.sessionData)||void 0===e?void 0:e.id,concessions:[...s]};X.removeConcession(n).then(e=>{if(e.ok)return V({concessions:[],activeStep:Y-1})})},ew=()=>{if(!U()){k.GG.emit("openSignInModal");return}V({activeStep:Y+1}).then(()=>{var e;return $.push("/booking/".concat(null===(e=Z.movieData)||void 0===e?void 0:e.slug))})},eI=()=>{var e,t,s;if(!(null===(e=Z.seats)||void 0===e?void 0:e.length)){k.GG.emit("openAlertModal",{msg:ee("booking:pleaseSelectSeat")});return}if(!Q()){k.GG.emit("openAlertModal",{msg:ee("booking:validSelectSeat")});return}let n=Z.seats.length;if(!E()){if(!(null==Z?void 0:null===(s=Z.packages)||void 0===s?void 0:s.length))return eN().then(e=>ek(e.userSessionId,!1));let e=eC(n,Z.packages);if(e){eg(e),ep(!0);return}return eN().then(e=>ek(e.userSessionId,!1))}if(!(null==Z?void 0:null===(t=Z.packages)||void 0===t?void 0:t.length))return ek(Z.userSessionId,!1);let l=eC(n,Z.packages);if(l){eg(l),ep(!0);return}return ek(Z.userSessionId,!1)},eC=(e,t)=>{let s=t.find(t=>e>=t.minSeats&&e<t.maxSeats)||null;return s},eG=()=>{var e;let t=null===(e=Z.movieData)||void 0===e?void 0:e.age;if(!t||""===t||"0"===t)return eD();k.GG.emit("openConfirmModal",{header:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(i.Z,{age:t}),(0,n.jsx)("h4",{className:"mt-4 font-semibold text-xl",children:ee("booking:confirmAgeRating")})]})}),content:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center text-sm text-blue-40 italic",children:[ee("booking:confirmAgeContent"+t),ee("booking:agreeToProvideId")]})}),onConfirm:()=>{eD()}})},eD=()=>{var e;let t=L.Z.get(j.l0.barcode),s=P()(Z.concessions,e=>e.itemId>0),n=h()(s,e=>({itemId:e.itemId,quantity:e.qty})),l={orderId:Z.userSessionId,sessionId:null===(e=Z.sessionData)||void 0===e?void 0:e.id,concessions:n};H(!0),t?(V({...Z,barcodes:t?[t]:[]}),eZ(t,l)):eO(l)},eZ=(e,t)=>{X.applyVoucher(Z.userSessionId,e).finally(()=>{eO(t),k.GG.emit("processStop")}).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>{k.GG.emit("openAlertModal",{msg:ee("booking:applyVoucherSuccess")})}).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eO=e=>{X.seatConcessions(e).finally(()=>H(!1)).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>V({activeStep:Y+1})).catch(e=>{var t;return k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eV=()=>{let e={orderId:Z.userSessionId,methodId:Z.paymentMethod,fullName:T.name,phone:T.phone,email:T.email,successRedirectUrl:j.EZ.URL_SUCCESS,errorRedirectUrl:j.EZ.URL_ERROR};H(!0),X.placeOrder(e).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{var t,s;(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.statusCode)===1?$.replace("".concat(e.data.url)):(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.statusCode)===2&&$.push("/dat-ve-thanh-cong")}).catch(e=>{var t;H(!1),k.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})},eP=e=>{k.O2.emit("removeVoucher",e),ed.current&&em("".concat(ed.current.scrollHeight-20,"px"))};(0,x.useEffect)(()=>{let e=h()(null==Z?void 0:Z.concessions,e=>({name:e.name,price:e.price,qty:e.qty,total:e.qty*e.price,id:e.id}));ea(e)},[Z.concessions]),(0,x.useEffect)(()=>{let e=[];y()(z,t=>{y()(t.items,t=>e.push(t))}),er(e)},[z]);let eM=e=>{let t=[...Z.concessions],s=P()(t,t=>t.id!==e);V({...Z,concessions:s}),ed.current&&em("".concat(ed.current.scrollHeight-27,"px"))},eE=()=>{"max"===ec?em("[110px]"):em("max")},eR=()=>{var e;ep(!1),V({isPackage:!0,packageSelect:{...ev}});let t=null===(e=Z.movieData)||void 0===e?void 0:e.age;if(!t||""===t||"0"===t)return Z.userSessionId?ek(Z.userSessionId,!0):eN().then(e=>ek(e.userSessionId,!0));k.GG.emit("openConfirmModal",{header:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)(i.Z,{age:t}),(0,n.jsx)("h4",{className:"mt-4 font-semibold text-xl",children:ee("booking:confirmAgeRating")})]})}),content:(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"text-center text-sm text-blue-40 italic",children:[ee("booking:confirmAgeContent"+t),ee("booking:agreeToProvideId")]})}),onConfirm:()=>Z.userSessionId?ek(Z.userSessionId,!0):eN().then(e=>ek(e.userSessionId,!0))})},eF=()=>{if(ep(!1),eg(null),V({isPackage:!1,packageSelect:null}),Z.userSessionId)return ek(Z.userSessionId,!1);eN().then(e=>ek(e.userSessionId,!1))},eT=(0,n.jsxs)("div",{ref:ed,className:"fixed bottom-0 left-0 w-full z-100 bg-white xl:hidden transition-all duration-500 ease-in-out overflow-hidden max-h-[90vh] h-".concat(ec,"  min-h-").concat(ec," pb-12 pt-2 border border-[#DFDFDF] rounded-t-xl ").concat((null==Z?void 0:Z.sessionData)?"opacity-100":"opacity-0"),children:[(0,n.jsx)("div",{className:"rounded opacity-100  w-full",onClick:eE,children:(0,n.jsx)(q(),{src:F,width:45,height:20,alt:"Icon show",className:"absolute -top-[6%] left-[50%] -translate-x-[50%] brightness-90 grayscale-[20%] z-100"})}),(0,n.jsxs)("div",{className:R()({"grid grid-cols-3 items-center px-4 mb-2 transition opacity-0 relative overflow-hidden":!0," opacity-100":null==Z?void 0:Z.sessionData}),children:[(0,n.jsxs)("div",{className:"col-span-3",children:[en.length>0&&(0,n.jsx)("div",{className:"",children:h()(en,e=>(0,n.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{children:[ee("booking:seat"),": "]}),(0,n.jsx)("strong",{children:e.seats.join(", ")})]})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.categoryCode))}),ei.length>0&&(0,n.jsx)("div",{children:h()(ei,e=>(0,n.jsxs)("div",{className:"relative flex justify-between items-start text-sm",children:[e.itemId>0?(0,n.jsx)("button",{className:"flex-none mr-2 text-right",disabled:e.itemId<0,children:(0,n.jsx)(p.G,{icon:v.$aW,className:"inline-block text-lg cursor-pointer text-sm",onClick:()=>eM(e.id)})}):null,(0,n.jsxs)("span",{className:"flex-1",children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.name))}),Z.barcodes.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h4",{className:"text-sm font-semibold",children:ee("booking:listVoucherApplied")}),(0,n.jsx)("ul",{className:"mt-2 text-sm pl-0",children:h()(Z.barcodes,e=>{let t=O()(eo,t=>t.barcode===e);return(0,n.jsxs)("li",{className:"flex justify-between pl-0 pb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(p.G,{icon:v.$aW,className:"inline-block text-lg mr-2 cursor-pointer text-sm",onClick:()=>eP(e)}),(0,n.jsx)("span",{children:(null==t?void 0:t.name)||e})]}),(0,n.jsx)("div",{children:(null==t?void 0:t.value)>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.Z,{value:null==t?void 0:t.value})})})]},e)})})]}),Z.discountAmount>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,n.jsx)("span",{children:ee("booking:giftVoucher")}),(0,n.jsx)(m.Z,{value:Z.discountAmount,className:"text-red-20"})]})}),Z.loyaltyDiscount>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"flex justify-between mb-2",children:[(0,n.jsx)("span",{children:ee("booking:starsPoint")}),(0,n.jsx)(m.Z,{value:Z.loyaltyDiscount,className:"text-red-20"})]})})]}),(0,n.jsxs)("div",{className:"fixed bottom-0 ",children:[(0,n.jsxs)("div",{className:"justify-start  items-center gap-1 flex col-span-2 w-full h-14   fixed bottom-0 left-4 bg-white",children:[(0,n.jsxs)("strong",{className:"text-sm font-normal text-grey-10",children:[ee("booking:total"),":"," "]}),(null==Z?void 0:Z.activeStep)<4?(0,n.jsx)(m.Z,{value:B()(Z.seats,e=>e.ticketPrice)+B()(ei,e=>e.price*e.qty)-Z.discountAmount-Z.loyaltyDiscount||0,primary:!0}):(0,n.jsx)(m.Z,{value:Z.total,primary:!0})]}),(0,n.jsx)("div",{className:"text-right fixed bottom-0 right-4 h-14 flex items-center",children:Y<5&&(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:"w-[65px] h-10 py-2 bg-transparent text-primary text-sm rounded-md",onClick:ef,disabled:Y<1||_,children:(0,n.jsx)("span",{children:ee("booking:back")})}),(0,n.jsx)("button",{className:"w-[80px] h-10 py-2 bg-primary text-white border text-sm rounded-md hover:bg-orange-20 ".concat(4===Y?"w-[101px]":"w-[80px]"),disabled:Y>=5||_||J,onClick:ej,children:_?(0,n.jsx)(p.G,{icon:v.LM3,flip:"vertical",spin:!0,className:"text-lg"}):(0,n.jsx)("span",{children:4===Y?ee("booking:placeOrder"):ee("booking:continue")})})]})})]})]})]});return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"booking__summary md:mb-4",children:[E()&&(0,n.jsx)(C,{}),(0,n.jsx)("div",{className:"h-[6px] bg-primary rounded-t-lg"}),(0,n.jsxs)("div",{className:"bg-white p-4 grid grid-cols-3 xl:gap-2 items-center",children:[(0,n.jsx)("div",{className:"row-span-2 md:row-span-1 xl:row-span-2 block md:hidden xl:block",children:(0,n.jsx)(l.Z,{src:(null==Z?void 0:null===(t=Z.movieData)||void 0===t?void 0:t.imagePortrait)||G.Z,alt:(null==Z?void 0:null===(s=Z.movieData)||void 0===s?void 0:s.name)||"",width:100,height:150,className:"xl:w-full xl:h-full md:w-[80px] md:h-[120px] w-[90px] h-[110px] rounded object-cover"})}),(0,n.jsx)("div",{className:"row-span-2 md:row-span-1 xl:row-span-2 hidden md:block xl:hidden",children:(0,n.jsx)(l.Z,{src:(null==Z?void 0:null===(d=Z.movieData)||void 0===d?void 0:d.imageLandscape)||G.Z,alt:(null==Z?void 0:null===(u=Z.movieData)||void 0===u?void 0:u.name)||"",width:100,height:150,className:" w-[220px] h-[150px] rounded object-cover"})}),(0,n.jsxs)("div",{className:"flex-1 col-span-2 md:col-span-1 row-span-1 xl:col-span-2",children:[(0,n.jsx)("h3",{className:"text-sm xl:text-base font-bold xl:mb-2 ",children:null==Z?void 0:null===(g=Z.movieData)||void 0===g?void 0:g.name}),(0,n.jsx)("p",{className:"text-sm inline-block",children:null==Z?void 0:null===(b=Z.movieData)||void 0===b?void 0:b.movieFormat}),(0,n.jsx)("span",{children:" - "}),(0,n.jsx)("div",{className:"xl:mt-2 ml-2 xl:ml-0 inline-block",children:(0,n.jsx)(i.Z,{age:null==Z?void 0:null===(N=Z.movieData)||void 0===N?void 0:N.age})})]}),(0,n.jsxs)("div",{className:"col-span-2 md:col-span-1 xl:col-span-3",children:[(null==Z?void 0:Z.sessionData)&&(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"xl:mt-4 text-sm xl:text-base",children:[(0,n.jsx)("strong",{children:null==Z?void 0:null===(A=Z.cinemaData)||void 0===A?void 0:A.name}),(0,n.jsx)("span",{children:" - "}),(0,n.jsx)("span",{className:"text-sm xl:text-base",children:null==Z?void 0:null===(w=Z.sessionData)||void 0===w?void 0:w.screenName})]}),(0,n.jsxs)("div",{className:"xl:mt-2 text-sm xl:text-base",children:[(0,n.jsxs)("span",{children:[ee("booking:session"),": "]}),(0,n.jsx)("strong",{children:null==Z?void 0:null===(I=Z.sessionData)||void 0===I?void 0:I.showTime}),(0,n.jsx)("span",{children:" - "}),(0,n.jsxs)("span",{className:"capitalize text-sm",children:[es.format("dddd, "),(0,n.jsx)("strong",{children:es.format("DD/MM/YYYY")})]})]})]}),en.length>0&&(0,n.jsxs)("div",{className:"xl:block hidden",children:[(0,n.jsx)("div",{className:"my-4 border-t border-grey-60 border-dashed xl:block hidden"}),h()(en,e=>(0,n.jsxs)("div",{className:"flex justify-between text-sm mt-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("span",{children:[ee("booking:seat"),": "]}),(0,n.jsx)("strong",{children:e.seats.join(", ")})]})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.categoryCode))]}),ei.length>0&&(0,n.jsxs)("div",{className:"xl:block hidden",children:[(0,n.jsx)("div",{className:"my-4 border-t border-grey-60 border-dashed xl:block hidden"}),h()(ei,e=>(0,n.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,n.jsxs)("span",{children:[(0,n.jsxs)("strong",{children:[e.qty,"x "]}),(0,n.jsx)("span",{children:e.name})]}),(0,n.jsx)(m.Z,{value:e.total})]},e.name))]}),(0,n.jsx)("div",{className:"my-4 border-t border-grey-60 border-dashed xl:block hidden"})]}),Z.barcodes.length>0&&(0,n.jsxs)("div",{className:"xl:block hidden col-span-3",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold col-span-3",children:ee("booking:listVoucherApplied")}),(0,n.jsx)("ul",{className:"mt-2 xl:col-span-3 text-sm pl-0",children:h()(Z.barcodes,e=>{let t=O()(eo,t=>t.barcode===e);return(0,n.jsxs)("li",{className:"flex justify-between pl-0 pb-2",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(p.G,{icon:v.$aW,className:"inline-block text-lg mr-2 cursor-pointer",onClick:()=>eP(e)}),(0,n.jsx)("span",{children:(null==t?void 0:t.name)||e})]}),(0,n.jsx)("div",{children:(null==t?void 0:t.value)>0&&(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(m.Z,{value:null==t?void 0:t.value})})})]},e)})}),(0,n.jsx)("div",{className:"my-2 border-t border-grey-60 border-dashed block col-span-3"})]}),Z.discountAmount>0&&(0,n.jsx)("div",{className:"xl:block hidden col-span-3",children:(0,n.jsxs)("div",{className:"xl:flex hidden justify-between mb-2 col-span-3",children:[(0,n.jsx)("span",{children:ee("booking:giftVoucher")}),(0,n.jsx)(m.Z,{value:Z.discountAmount,className:"text-red-20"})]})}),Z.loyaltyDiscount>0&&(0,n.jsx)("div",{className:"xl:block hidden col-span-3",children:(0,n.jsxs)("div",{className:"xl:flex hidden justify-between mb-2 col-span-3",children:[(0,n.jsx)("span",{children:ee("booking:starsPoint")}),(0,n.jsx)(m.Z,{value:Z.loyaltyDiscount,className:"text-red-20"})]})}),(0,n.jsxs)("div",{className:"xl:flex hidden justify-between col-span-3",children:[(0,n.jsx)("strong",{className:"text-base",children:ee("booking:total")}),(null==Z?void 0:Z.activeStep)<4?(0,n.jsx)(m.Z,{value:B()(Z.seats,e=>e.ticketPrice)+B()(ei,e=>e.price*e.qty)-Z.discountAmount-Z.loyaltyDiscount||0,primary:!0}):(0,n.jsx)(m.Z,{value:Z.total,primary:!0})]})]}),Y<5&&(0,n.jsxs)("div",{className:"mt-8 xl:flex hidden",children:[(0,n.jsx)("button",{className:"w-1/2 mr-2 py-2 text-primary",onClick:ef,disabled:Y<1||_,children:(0,n.jsx)("span",{children:ee("booking:back")})}),(0,n.jsx)("button",{className:"w-1/2 ml-2 py-2  bg-primary text-white border rounded-md hover:bg-orange-20",disabled:Y>=5||_||J,onClick:ej,children:_?(0,n.jsx)(p.G,{icon:v.LM3,flip:"vertical",spin:!0,className:"text-lg"}):(0,n.jsx)("span",{children:4===Y?ee("booking:placeOrder"):ee("booking:continue")})})]})]}),eT,(0,n.jsx)(W,{isOpen:ex,onClose:()=>eu(!1),tickets:en,concessions:ei,placeOrder:eV}),ev&&Object.entries(ev).length&&(0,n.jsx)(K,{isOpen:eh,onClose:eF,item:ev,handleOk:eR})]})}},47136:function(e,t,s){s.d(t,{Z:function(){return m}});var n=s(36734);s(51776);var l=s(94195),i=s.n(l),a=s(86880),o=s(4164),r=s(6425),d=s.n(r),c=s(33906);function m(){let{t:e}=(0,a.Z)(),{activeStep:t}=(0,o.Q)();(0,c.useRouter)();let s=[{id:"session",order:1,name:e("booking:stepSession")},{id:"seat",order:2,name:e("booking:stepSeat")},{id:"concession",order:3,name:e("booking:stepConcession")},{id:"payment",order:4,name:e("booking:stepPayment")},{id:"confirm",order:5,name:e("booking:stepConfirm")}],l=e=>{};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"booking__progress-bar flex justify-center items-center flex-nowrap bg-white relative md:mb-8 mb-0 w-full overflow-auto",children:(0,n.jsx)("ul",{className:"flex  justify-center items-center text-grey-20 md:text-base text-[12px] font-semibold w-full flex-nowrap",children:i()(s,e=>(0,n.jsxs)("li",{className:d()({"pt-4 mb-4 pl-0":!0,"text-blue-10":t===e.order,"text-blue-20":t>e.order}),children:[(0,n.jsx)("button",{className:d()({"md:mx-3 mx-1":!0,"ml-0":1===e.order,"mr-0":5===e.order}),onClick:()=>{l(e.order)},children:e.name}),(0,n.jsx)("div",{className:d()({"relative mt-4 h-[2px]":!0,"before:inline-block before:w-full before:absolute before:left-0 before:h-[2px] before:bg-grey-30":!0,"after:inline-block after:absolute after:left-0 after:h-[2px] after:bg-blue-10":t>=e.order,"after:w-1/2":t===e.order,"after:w-full":t>=e.order})})]},e.id))})})})}},25404:function(e,t,s){s.d(t,{Z:function(){return a}});var n=s(36734),l=s(6425),i=s.n(l);function a(e){let t=parseFloat(e.value),s={"inline-block font-bold":!0,"text-primary":e.primary};return s[e.className||""]=!0,(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:i()(s),children:t.toLocaleString("vi-VN",{style:"currency",currency:"VND"})})})}},44234:function(e,t,s){s.d(t,{Z:function(){return i}});var n=s(36734),l=s(56683);function i(e){let{age:t}=e,s=l.lV.getAllowedType(t);return(0,n.jsx)(n.Fragment,{children:s&&(0,n.jsx)("span",{className:"inline-flex items-center justify-center w-[38px] h-7 bg-primary rounded text-sm text-center text-white font-bold not-italic",children:s})})}s(51776)},4164:function(e,t,s){s.d(t,{Q:function(){return D},v:function(){return G}});var n=s(36734),l=s(51776),i=s(12792),a=s(42072),o=s(31720),r=s(37654),d=s.n(r),c=s(94195),m=s.n(c),x=s(5888),u=s.n(x),h=s(34904),p=s.n(h),v=s(44155),g=s.n(v),f=s(65174),j=s(86880),b=s(78204),y=s(11804),N=s.n(y),k=s(28176),A=s.n(k),S=s(56683);let w=l.createContext({sessions:[],voucherGroups:[],activeStep:1,isLoading:!1,disableNextStep:!1,loyaltyNote:"",seatLayout:null,isValidSeats:()=>!1,setSessions:()=>{},setActiveStep:()=>{},setIsLoading:()=>{},setDisableNextStep:()=>{},setSeatLayout:()=>{}}),I=new o.n,C=new f.I,G=e=>{let{t}=(0,j.Z)(),[s,o]=l.useState([]),[r,c]=l.useState([]),[x,h]=l.useState(1),[v,f]=l.useState(!1),[y,k]=l.useState(!1),[G,D]=l.useState(null),[Z,O]=l.useState(""),{quote:V,saveQuote:P}=(0,i.bN)(),M=()=>{let e=!0,t=(0,b.m6)(G);if((null==t?void 0:t.length)<6)return!0;let s=G?G.maxColumn:0;return g()(V.seats,n=>{if(!e||S.lV.isSeatCouple(null==n?void 0:n.type)||S.lV.isSeatTriple(null==n?void 0:n.type)||S.lV.isSeatBed(null==n?void 0:n.type))return;let l=N()(t,e=>e.index===n.row),i=l.seats,a=i.filter(e=>1===e.status),o=0,r=0;if(a&&a.length>0){let t=[...a,...V.seats],s=A()(t,["column"],["asc"]),n=function(e){for(let t=0;t<e.length;t++)for(let s=t+1;s<e.length;s++){if(2===Math.abs(e[t].column-e[s].column))return!0;t++}return!1}(s);if(n){e=!1;return}}else g()(i,t=>{if(0===n.column||n.column===s-1||t.column===n.column)return;let l=N()(V.seats,e=>e.area===t.area&&e.row===t.row&&e.column===t.column)||1===t.status;if(t.column>n.column){if((l||(0,b.fJ)(t))&&1===r){e=!1;return}if(l){r=0;return}if((0,b.fJ)(t))return;r++}else{if(l||(0,b.fJ)(t)){o=0;return}o++}});(1===o||1===r)&&(e=!1)}),e};return l.useEffect(()=>{if(null==V?void 0:V.activeStep){var e;h(parseInt(null===(e=V.activeStep)||void 0===e?void 0:e.toString()))}},[null==V?void 0:V.activeStep]),l.useEffect(()=>{let e=a.O2.on("refreshSummary",()=>{a.GG.emit("processStart"),I.getOrderSummary(V.userSessionId).finally(()=>a.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{var t,s;let n=d()(null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.tickets,e=>e.ticketTypeCode),l=m()(n,e=>{let t=[];return g()(e,e=>{t.push(...e.seats)}),{categoryCode:u()(e,"0.ticketTypeCode"),name:u()(e,"0.description"),qty:e.length,price:u()(e,"0.price"),total:p()(e,e=>e.price),seats:t}}),i=Object.values(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.concessions.reduce((e,t)=>(e[t.itemId]?(e[t.itemId].qty+=1,e[t.itemId].total=e[t.itemId].price*e[t.itemId].qty):e[t.itemId]={...t,qty:t.quantity,total:t.price*t.quantity},e),{})),a=m()(i,e=>({itemId:e.itemId,name:e.description,price:e.price,qty:e.qty,total:e.total}));P({tickets:l,concessions:a,discountAmount:(null==e?void 0:e.data.discountAmount)||0,loyaltyPoint:(null==e?void 0:e.data.loyaltyPoint)||0,loyaltyDiscount:(null==e?void 0:e.data.loyaltyDiscount)||0,totalPoints:(null==e?void 0:e.data.totalPoints)||0,barcodes:(null==e?void 0:e.data.barcodes)||[],total:(null==e?void 0:e.data.total)||0}),O((null==e?void 0:e.data.loyaltyText)||"")})}),t=a.O2.on("removeVoucher",e=>{a.GG.emit("processStart"),I.removeVoucher(V.userSessionId,e).finally(()=>a.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{a.O2.emit("refreshSummary")})}),s=a.O2.on("clearVouchers",()=>{a.GG.emit("processStart"),I.clearVouchers(V.userSessionId).finally(()=>a.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{a.O2.emit("refreshSummary")})});return()=>{e(),t(),s()}},[V.userSessionId]),l.useEffect(()=>{let e=a.O2.on("getVouchers",()=>{C.getVouchers().then(e=>e.ok?e.data:Promise.reject(e.data)).then(e=>{var t;c((null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.result)||[])})}),s=a.O2.on("applyPoint",e=>{a.GG.emit("processStart"),I.applyPoint(e).finally(()=>a.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>{a.GG.emit("openAlertModal",{msg:t("booking:applyPointSuccess")}),a.O2.emit("refreshSummary")}).catch(e=>{var t;a.GG.emit("openAlertModal",{msg:null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message})})}),n=a.O2.on("clearPoint",()=>{a.GG.emit("processStart"),I.clearPoint().finally(()=>a.GG.emit("processStop")).then(e=>e.ok?e.data:Promise.reject(e.data)).then(()=>{a.O2.emit("refreshSummary")}).catch(e=>{var t;return a.GG.emit("openAlertModal",null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.message)})});return()=>{e(),s(),n()}},[]),(0,n.jsx)(w.Provider,{value:{sessions:s,voucherGroups:r,activeStep:x,isLoading:v,disableNextStep:y,loyaltyNote:Z,seatLayout:G,isValidSeats:M,setSessions:o,setActiveStep:h,setIsLoading:f,setDisableNextStep:k,setSeatLayout:D},children:e.children})},D=()=>l.useContext(w)},85822:function(e,t,s){s.d(t,{s:function(){return l}});var n=s(51776);let l=()=>{let[e,t]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{t(!0)},[]),{hasMounted:e}}},75141:function(e,t,s){s.d(t,{Bu:function(){return r},Gr:function(){return c},Vt:function(){return d}});var n=s(8497),l=s.n(n),i=s(88910),a=s(88108),o=s.n(a);let r=(e,t)=>String(e).padStart(t,"0"),d=e=>String(e).replace(/(<([^>]+)>)/ig,""),c=e=>{let t=l()(i.EZ.BASE_URL,"/");return[t,e=o()(e,"/")].join("/")}}}]);